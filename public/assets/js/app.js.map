{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/js/app.js","webpack:///./resources/sass/app.scss","webpack:///./resources/sass/vendor.scss?ced7"],"names":["$","ajaxSetup","headers","attr","Dropzone","autoDiscover","carousel","dropzone","maxFilesize","url","acceptedFiles","maxFiles","file","response","document","Toasts","title","position","delay","autohide","body","name","window","location","href","id","length","preProcessing","ajax","type","success","res","html","removeClass","addClass","images","image","appendPreviewImage","detectBillType","error","xhr","status","responseJSON","message","show","detectBillTypeResult","toastr","completed","lastMessage","setTimeout","isSupported","confidence","extractBillData","extractBillDataResult","datatype","data","dom","website","address","date","cashier","items","amount","i","item","quantity","price","append","src"],"mappings":"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","file":"/assets/js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","$.ajaxSetup({\n\theaders: {\n\t\t'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t}\n});\n\nDropzone.autoDiscover = false;\n$(\".carousel\").carousel();\n\n$(\"#uploadBill\").dropzone({\n\tmaxFilesize: 10,\n\turl: \"/upload-bill\",\n\tacceptedFiles: \"image/jpg, image/jpeg, image/png\",\n\tmaxFiles: 1,\n\tmaxFilesize: 10,\n\taddRemoveLinks: true,\n\tcapture:true,\n\tdictDefaultMessage: \"Tải lên ảnh chụp của hoá đơn<br/>*.jpg\",\n\tsuccess: function( file, response ){\n\t\t$(document).Toasts('create', {\n\t\t\tclass: 'bg-success',\n\t\t\ttitle: 'Upload success',\n\t\t\tposition: 'bottomRight',\n\t\t\tdelay: 750,\n\t\t\tautohide: true,\n\t\t\tbody: 'Đã tải ảnh ' + file.name + ' lên server thành công'\n\t\t  })\n\t\twindow.location.href = '/inquiry/' + response.id + \"/\";\n\t}\n})\n\n$(function(){\n\t\n\tif ($('#pre-processing').length > 0){\n\t\tpreProcessing();\n\t}\n})\n\nfunction preProcessing(){\n\n\t$.ajax({\n\t\turl: 'preprocessing',\n\t\ttype: 'POST',\n\t\tsuccess: function(res){\n\t\t\t$(\"#pre-processing [role='message']\").html(\"Tiền xử lý hình ảnh thành công\");\n\t\t\t$(\"#pre-processing [role='state']\").removeClass(\"bg-info\").addClass(\"bg-success\").html('<i class=\"fas fa-check\"></i>')\n\t\t\t$(document).Toasts('create', {\n\t\t\t\tclass: 'bg-success',\n\t\t\t\ttitle: 'Success',\n\t\t\t\tposition: 'bottomRight',\n\t\t\t\tdelay: 750,\n\t\t\t\tautohide: true,\n\t\t\t\tbody: 'Xử lý ảnh thành công'\n\t\t\t  })\n\t\t\tif(res.images && typeof res.images == \"object\"){\n\t\t\t\tfor(image in res.images){\n\t\t\t\t\tappendPreviewImage(res.images[image], image)\n\t\t\t\t}\n\t\t\t}\n\t\t\tdetectBillType();\n\t\t},\n\t\terror: function(xhr, status, error){\n\t\t\t$(\"#pre-processing [role='message']\").html(xhr.responseJSON.message);\n\t\t\t$(\"#pre-processing [role='state']\").removeClass(\"bg-info\").addClass(\"bg-danger\").html('<i class=\"fas fa-times\"></i>')\n\t\t\t$(document).Toasts('create', {\n\t\t\t\tclass: 'bg-danger',\n\t\t\t\ttitle: 'Error',\n\t\t\t\tposition: 'bottomRight',\n\t\t\t\tbody: 'Có lỗi xảy ra trong quá trình xử lý ảnh'\n\t\t\t  })\n\t\t},\n\t})\n}\n\nfunction detectBillType(){\n\t$(\"#bill-type\").show();\n\n\t$.ajax({\n\t\turl: 'detect-bill-type',\n\t\ttype: 'POST',\n\t\tsuccess: function(res){\n\t\t\tdetectBillTypeResult()\n\t\t},\n\t\terror: function(xhr, status, error){\n\t\t\ttoastr.error(xhr.responseJSON.message)\n\t\t},\n\t})\n}\n\nfunction detectBillTypeResult(){\n\t$.ajax({\n\t\turl: 'detect-bill-type-result',\n\t\ttype: 'POST',\n\t\tsuccess: function(res){\n\t\t\tif(!res.completed){\n\t\t\t\tif(res.message && res.message != window.lastMessage){\n\t\t\t\t\t$(\"#bill-type [role='message']\").html(res.message);\n\t\t\t\t\twindow.lastMessage = res.message;\n\t\t\t\t}\n\t\t\t\treturn setTimeout(detectBillTypeResult, 1000);\n\t\t\t}\n\n\t\t\tif(res.isSupported){\n\t\t\t\t$(\"#bill-type [role='state']\").removeClass(\"bg-info\").addClass(\"bg-success\").html('<i class=\"fas fa-check\"></i>')\n\t\t\t\t$(\"#bill-type [role='message']\").html(\"Cửa hàng: \" + res.name + \" [\" + res.confidence + \"%]\");\n\t\t\t\t$(document).Toasts('create', {\n\t\t\t\t\tclass: 'bg-success',\n\t\t\t\t\ttitle: 'Success',\n\t\t\t\t\tposition: 'bottomRight',\n\t\t\t\t\tdelay: 750,\n\t\t\t\t\tautohide: true,\n\t\t\t\t\tbody: 'Nhận dạng loại hoá đơn thành công'\n\t\t\t\t  })\n\t\t\t\tif(res.images && typeof res.images == \"object\"){\n\t\t\t\t\tfor(image in res.images){\n\t\t\t\t\t\tappendPreviewImage(res.images[image], image)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\textractBillData()\n\t\t\t}\n\t\t\t\n\t\t\telse{\n\t\t\t\t$(\"#bill-type [role='state']\").removeClass(\"bg-info\").addClass(\"bg-danger\").html('<i class=\"fas fa-times\"></i>')\n\n\t\t\t\tif(res.message == \"Unsupported\"){\n\t\t\t\t\t$(\"#bill-type [role='message']\").html(\"Loại hoá đơn không được hỗ trợ hoặc ảnh chụp không rõ hoá đơn\")\n\t\t\t\t\t$(document).Toasts('create', {\n\t\t\t\t\t\tclass: 'bg-danger',\n\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\tposition: 'bottomRight',\n\t\t\t\t\t\tbody: 'Loại hoá đơn này không được hỗ trợ'\n\t\t\t\t\t  })\n\t\t\t\t\treturn;\n\t\t\t\t}else{\n\t\t\t\t\t$(\"#bill-type [role='message']\").html(res.message)\n\t\t\t\t\t$(document).Toasts('create', {\n\t\t\t\t\t\tclass: 'bg-danger',\n\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\tposition: 'bottomRight',\n\t\t\t\t\t\tbody: 'Xảy ra lỗi trong quá trình xử lý'\n\t\t\t\t\t  })\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t},\n\t\terror: function(xhr, status, error){\n\t\t\tsetTimeout(detectBillTypeResult, 1000);\n\t\t},\n\t})\n}\n\nfunction extractBillData(){\n\t$(\"#bill-extraction\").show();\n\n\t$(\"#processing-status\").html(\"Đang trích xuất thông tin hoá đơn\")\n\t$.ajax({\n\t\turl: 'extract',\n\t\ttype: 'POST',\n\t\tsuccess: function(res){\n\t\t\textractBillDataResult()\n\t\t},\n\t\terror: function(xhr, status, error){\n\t\t\ttoastr.error(xhr.responseJSON.message)\n\t\t},\n\t})\n}\n\nfunction extractBillDataResult(){\n\t$.ajax({\n\t\turl: 'extract-result',\n\t\ttype: 'POST',\n\t\tdatatype: 'json',\n\t\tsuccess: function(res){\n\t\t\tif(!res.completed){\n\t\t\t\treturn setTimeout(extractBillDataResult, 1000);\n\t\t\t}\n\n\t\t\tvar data = res.data;\n\n\t\t\tif(data.success){\n\t\t\t\tif(res.images){\n\t\t\t\t\tfor(image in res.images){\n\t\t\t\t\t\tappendPreviewImage(res.images[image], image)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$(\"#bill-extraction-data\").show();\n\t\t\t\tlet dom = '<table class=\"table\"><tbody>';\n\t\t\t\tdom += `<tr><td>Website</td><td>${data.website}</td></tr>`;\n\t\t\t\tdom += `<tr><td>Địa chỉ</td><td>${data.address}</td></tr>`;\n\t\t\t\tdom += `<tr><td>Số HĐ</td><td>${data.id}</td></tr>`;\n\t\t\t\tdom += `<tr><td>Ngày lập HĐ</td><td>${data.date}</td></tr>`;\n\t\t\t\tdom += `<tr><td>Nhân viên</td><td>${data.cashier}</td></tr>`;\n\t\t\t\tdom += `<tr><td>Số sản phẩm</td><td>${data.items ? data.items.length : 'N/a'}</td></tr>`;\n\t\t\t\tdom += `<tr><td>Thành tiền</td><td>${data.amount || 'N/a'}</td></tr>`;\n\t\t\t\tdom += '</tbody></table>'\n\n\t\t\t\tif(data.items){\n\t\t\t\t\tdom += '<div class=\"text-primary mt-3 text-bold\">Danh sách các sản phẩm</div>';\n\t\t\t\t\tdom += '<table class=\"table\"><thead><tr><th>#</th><th>Sản phẩm</th><th>Số lượng</th><th>Giá bán</th><th>Thành tiền</th></tr></thead><tbody>';\n\t\t\t\t\tfor (var i =0; i < data.items.length; i++){\n\t\t\t\t\t\tvar item = data.items[i]\n\t\t\t\t\t\tdom += `<tr><td>${i+1}</td><td>${item.item}</td><td>${item.quantity}</td><td>${item.price}</td><td>${item.amount}</td></tr>`;\n\t\t\t\t\t}\n\t\t\t\t\tdom += '</tbody></table>';\n\t\t\t\t}\n\n\t\t\t\t$(\"#bill-extraction-data [role='container']\").append(dom)\n\t\t\t\t$(\"#bill-extraction [role='state']\").removeClass(\"bg-info\").addClass(\"bg-success\").html('<i class=\"fas fa-check\"></i>')\n\t\t\t\t$(\"#bill-extraction [role='message']\").html(\"Thành công\");\n\t\t\t}else{\n\t\t\t\t$(\"#bill-extraction [role='state']\").removeClass(\"bg-info\").addClass(\"bg-danger\").html('<i class=\"fas fa-times\"></i>')\n\t\t\t\t$(\"#bill-extraction [role='message']\").html(data.message);\n\t\t\t\t$(document).Toasts('create', {\n\t\t\t\t\tclass: 'bg-danger',\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tposition: 'bottomRight',\n\t\t\t\t\tbody: 'Có lỗi xảy ra trong quá trình xử lý'\n\t\t\t\t  })\n\t\t\t}\t\n\t\t},\n\t\terror: function(xhr, status, error){\n\t\t\tsetTimeout(extractBillDataResult, 1000);\n\t\t},\n\t})\n}\n\nfunction appendPreviewImage(src, title){\n\tlet dom = '<div class=\"carousel-item\"><img class=\"d-block w-100\" src=\"'+src+'\" alt=\"'+title+'\"><div class=\"card-img-overlay\"><h5 class=\"card-title text-danger\">'+title+'</h5></div></div>';\n\t$(\".bill-image [role='container']\").append(dom);\n\t// $(\".bill-image [role='container'] > div:first-child\").addClass('active');\n}","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin"],"sourceRoot":""}